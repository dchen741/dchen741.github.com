<!doctype html>
<head>
    <meta charset="utf-8">

    <title>ARI Database</title>
    <meta name="description" content="Database for ARI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../styles/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="../styles/style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.3.1.min.js"></script>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="page-header text-center">
                <h1>ARI Database</h1>
            </div>
        </div>

        <!-- ********** DANTE'S STUFF ************** -->
        <div class="jumbotron">
            <div class="row">
                <h2>Dante</h2>
            </div>
            <div class="row">
                <h4>Question Pool</h4>
            </div>
            <div class="row">
                <div id="dantePool"><span>There are no questions available.</span></div>
            </div>
            <div class="row">
                <h4>Correct Questions</h4>
            </div>
            <div class="row">
                <div id="danteCorrectTable"><span>There are no correct questions available.</span></div>
            </div>
            <div class="row">
                <h4>Incorrect Questions</h4>
            </div>
            <div class="row">
                <div id="danteIncorrectTable"><span>There are no incorrect questions available.</span></div>
            </div>
            <div class="row">
                <h4>Contests</h4>
            </div>
            <div class="row">
                <div id="danteContestTable"><span>There are no contests available.</span></div>
            </div>
        </div>
        <!-- ********** END  ************** -->

        <!-- ********** LAURA'S STUFF ************** -->
        <div class="jumbotron">
            <div class="row">
                <h2>Laura</h2>
            </div>
            <div class="row">
                <h4>Question Pool</h4>
            </div>
            <div class="row">
                <div id="lauraPool"><span>There are no questions available.</span></div>
            </div>
            <div class="row">
                <h4>Correct Questions</h4>
            </div>
            <div class="row">
                <div id="lauraCorrectTable"><span>There are no correct questions available.</span></div>
            </div>
            <div class="row">
                <h4>Incorrect Questions</h4>
            </div>
            <div class="row">
                <div id="lauraIncorrectTable"><span>There are no incorrect questions available.</span></div>
            </div>
            <div class="row">
                <h4>Contests</h4>
            </div>
            <div class="row">
                <div id="lauraContestTable"><span>There are no contests available.</span></div>
            </div>
        </div>
        <!-- ********** END  ************** -->

        <!-- ********** EVA'S STUFF ************** -->
        <div class="jumbotron">
            <div class="row">
                <h2>Eva</h2>
            </div>
            <div class="row">
                <h4>Question Pool</h4>
            </div>
            <div class="row">
                <div id="evaPool"><span>There are no questions available.</span></div>
            </div>
            <div class="row">
                <h4>Correct Questions</h4>
            </div>
            <div class="row">
                <div id="evaCorrectTable"><span>There are no correct questions available.</span></div>
            </div>
            <div class="row">
                <h4>Incorrect Questions</h4>
            </div>
            <div class="row">
                <div id="evaIncorrectTable"><span>There are no incorrect questions available.</span></div>
            </div>
            <div class="row">
                <h4>Contests</h4>
            </div>
            <div class="row">
                <div id="evaContestTable"><span>There are no contests available.</span></div>
            </div>
        </div>
        <!-- ********** END  ************** -->

    </div>
    <script type="text/javascript">
        tempString = [];
        Parse.initialize("ASMRRN5iWBqYCX4xmWqE4WVfFexRuVhDuEudAOgh","ilpKJp7jgCw4L9XBQ6DEUaYVXOxy4iu8QPqEZZ7g");
        var Thing = Parse.Object.extend("iPhoneQuizApp");
        var query = new Parse.Query(Thing);
        //DANTE
        query.get("OMh1TcTdO2", {
            success: function(ariThing) {
                console.log(ariThing._serverData);
                QuestionPool('#dantePool', ariThing._serverData.questionPoolArray);
                Table("#danteCorrectTable", ariThing._serverData.correctAnswerArray, ariThing._serverData.correctDateArray, ariThing._serverData.correctJOLArray);
                Table("#danteIncorrectTable", ariThing._serverData.incorrectAnswerArray, ariThing._serverData.incorrectDateArray, ariThing._serverData.incorrectJOLArray);
                makeContest("#danteContestTable", ariThing._serverData.contestIncorrect, ariThing._serverData.contestObsolete, ariThing._serverData.contestMispelled, ariThing._serverData.contestCorrect, ariThing._serverData.contestAnswers, ariThing._serverData.badQuestion);
            },
            error: function(object, error) {
                console.log("no");
            }
        });

        //LAURA
        query.get("t3wCj7UZ7U", {
            success: function(ariThing) {
                console.log(ariThing._serverData);
                QuestionPool('#lauraPool', ariThing._serverData.questionPoolArray);
                Table("#lauraCorrectTable", ariThing._serverData.correctAnswerArray, ariThing._serverData.correctDateArray, ariThing._serverData.correctJOLArray);
                Table("#lauraIncorrectTable", ariThing._serverData.incorrectAnswerArray, ariThing._serverData.incorrectDateArray, ariThing._serverData.incorrectJOLArray);
                makeContest("#lauraContestTable", ariThing._serverData.contestIncorrect, ariThing._serverData.contestObsolete, ariThing._serverData.contestMispelled, ariThing._serverData.contestCorrect, ariThing._serverData.contestAnswers, ariThing._serverData.badQuestion);
            },
            error: function(object, error) {
                console.log("no");
            }
        });

        //EVA
        query.get("oTyFMbaZC6", {
            success: function(ariThing) {
                console.log(ariThing._serverData);
                QuestionPool('#evaPool', ariThing._serverData.questionPoolArray);
                Table("#evaCorrectTable", ariThing._serverData.correctAnswerArray, ariThing._serverData.correctDateArray, ariThing._serverData.correctJOLArray);
                Table("#evaIncorrectTable", ariThing._serverData.incorrectAnswerArray, ariThing._serverData.incorrectDateArray, ariThing._serverData.incorrectJOLArray);
                makeContest("#evaContestTable", ariThing._serverData.contestIncorrect, ariThing._serverData.contestObsolete, ariThing._serverData.contestMispelled, ariThing._serverData.contestCorrect, ariThing._serverData.contestAnswers, ariThing._serverData.badQuestion);
            },
            error: function(object, error) {
                console.log("no");
            }
        });

        function QuestionPool(questionType, questionPoolArray){
            var pool = '<p>';
            pool += questionPoolArray;
            pool += '</p>';
            $(questionType).html(pool);
        }
        //Make Tables
        function Table(questionType, answerArray, dateArray, jolArray) {
            var table = '<table class="table table-bordered table-condensed"><thead><tr><th>Question Number</th><th>JOL</th><th>Question Date</th></tr></thead><tbody>';
            numAnswers = answerArray.length;
            if(numAnswers == 0){
                var row = "<tr><td>N/A</td><td>N/A</td><td>N/A</td></tr>";
                table+=row;
            }
            else{
                for (var i=0;i<numAnswers;i++) {
                    var row = "<tr><td>"+String(answerArray[i])+"</td><td>"+jolArray[i]+"</td><td>"+addHours(dateArray[i])+"</tr>";
                    table += row;
                }
            }
            table += '</table>';
            $(questionType).html(table);
        }
        function addHours(date){
            console.log(date);
            date.setHours(date.getHours() + 5);
            return date;
        }
        function makeContest(personType, incorrect, obsolete, mispelled, correct, answers, bad){
            var contestTable = '<table class="table table-bordered table-condensed"><thead><tr><th>Question Number</th><th>Type of Contest</th></tr></thead><tbody>';
            numContests = incorrect.length + obsolete.length + mispelled.length + correct.length + answers.length + bad.length;
            console.log(numContests);
            if (numContests == 0){
                var row = "<tr><td>N/A</td><td>N/A</td></tr>";
                table+=row;
            }
            else{
                for (var i=0; i<incorrect.length;i++){
                    var row = "<tr><td>"+String(incorrect[i])+"</td><td>"+"contestIncorrect"+"</td></tr>";
                    table += row;
                }
                for (var i=0; i<obsolete.length;i++){
                    var row = "<tr><td>"+String(obsolete[i])+"</td><td>"+"contestObsolete"+"</td></tr>";
                    table += row;
                }
                for (var i=0; i<mispelled.length;i++){
                    var row = "<tr><td>"+String(mispelled[i])+"</td><td>"+"contestMispelled"+"</td></tr>";
                    table += row;
                }
                for (var i=0; i<correct.length;i++){
                    var row = "<tr><td>"+String(correct[i])+"</td><td>"+"contestCorrect"+"</td></tr>";
                    table += row;
                }
                for (var i=0; i<answers.length;i++){
                    var row = "<tr><td>"+String(answers[i])+"</td><td>"+"contestAnswer"+"</td></tr>";
                    table += row;
                }
                for (var i=0; i<bad.length;i++){
                    var row = "<tr><td>"+String(bad[i])+"</td><td>"+"badQuestion"+"</td></tr>";
                    table += row;
                }
            }
            contestTable += '</table>';
            $(personType).html(contestTable);
        }
    </script>
</body>

</html>
